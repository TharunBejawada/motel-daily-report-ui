import{_ as h}from"./DlAUqK2U.js";import{c as r,o as d,a as t,m as R,z as N,u as C,r as $,p as D,s as l,b as O,t as n,d as i,A as m,F as g,B as f}from"./CWpK9PPU.js";const L={},V={class:"flex items-center justify-center py-10 text-gray-500"};function A(k,c){return d(),r("div",V,[...c[0]||(c[0]=[t("svg",{class:"animate-spin h-6 w-6 mr-2",viewBox:"0 0 24 24"},[t("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",fill:"none","stroke-width":"4",opacity:"0.2"}),t("path",{d:"M22 12a10 10 0 00-10-10",fill:"currentColor"})],-1),t("span",null,"Loading…",-1)])])}const B=h(L,[["render",A]]),F={key:0},U={key:1,class:"space-y-6"},j={class:"flex items-center justify-between"},E={class:"text-2xl font-semibold"},S={class:"text-gray-600"},M={key:0},P={class:"text-gray-600"},T={class:"flex gap-2"},z={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},I={class:"rounded-lg border bg-white p-4"},X={class:"space-y-1 text-sm"},q={class:"rounded-lg border bg-white p-4"},G={class:"text-sm"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},J={class:"rounded-lg border bg-white p-4"},K={class:"text-sm list-disc pl-5"},Q={key:0},W={key:0,class:"text-gray-500"},Y={class:"rounded-lg border bg-white p-4"},Z={class:"text-sm list-disc pl-5"},tt={key:0,class:"text-gray-500"},ot={class:"rounded-lg border bg-white p-4"},st={class:"text-sm list-disc pl-5"},et={key:0},nt={key:0,class:"text-gray-500"},lt={class:"rounded-lg border bg-white p-4"},rt={class:"text-sm list-disc pl-5"},dt={key:0},it={key:0,class:"text-gray-500"},pt=R({__name:"[id]",setup(k){const c=N(),x=C(),_=Number(c.params.id),e=$(null);async function w(){var u,o;try{const{data:a}=await x.get(`/reports/${_}`);e.value=a}catch(a){alert(((o=(u=a==null?void 0:a.response)==null?void 0:u.data)==null?void 0:o.detail)||"Failed to load report")}}async function v(u){var o,a;try{const p=u==="pdf"?`/reports/${_}/export/pdf`:`/reports/${_}/export/docx`,{data:b}=await x.get(p,{responseType:"blob"}),y=new Blob([b],{type:u==="pdf"?"application/pdf":"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}),s=document.createElement("a");s.href=URL.createObjectURL(y),s.download=`report_${_}.${u}`,s.click(),URL.revokeObjectURL(s.href)}catch(p){alert(((a=(o=p==null?void 0:p.response)==null?void 0:o.data)==null?void 0:a.detail)||`Failed to download ${u.toUpperCase()}`)}}return D(w),(u,o)=>{var a,p,b,y;return l(e)?(d(),r("div",U,[t("div",j,[t("div",null,[t("h1",E,"Report #"+n(l(e).id),1),t("div",S,[i(n(l(e).motel_name)+" ",1),l(e).location?(d(),r("span",M,"— "+n(l(e).location),1)):m("",!0)]),t("div",P,"Date: "+n(l(e).report_date),1)]),t("div",T,[t("button",{class:"rounded-md border px-3 py-2 text-sm hover:bg-gray-50",onClick:o[0]||(o[0]=s=>v("pdf"))},"Export PDF"),t("button",{class:"rounded-md border px-3 py-2 text-sm hover:bg-gray-50",onClick:o[1]||(o[1]=s=>v("docx"))},"Export DOCX")])]),t("div",z,[t("div",I,[o[10]||(o[10]=t("h2",{class:"font-semibold mb-2"},"Summary",-1)),t("ul",X,[t("li",null,[o[2]||(o[2]=t("b",null,"Department:",-1)),i(" "+n(l(e).department||"—"),1)]),t("li",null,[o[3]||(o[3]=t("b",null,"Auditor:",-1)),i(" "+n(l(e).auditor||"—"),1)]),t("li",null,[o[4]||(o[4]=t("b",null,"Revenue:",-1)),i(" "+n(l(e).revenue??0),1)]),t("li",null,[o[5]||(o[5]=t("b",null,"ADR:",-1)),i(" "+n(l(e).adr??0),1)]),t("li",null,[o[6]||(o[6]=t("b",null,"Occupancy:",-1)),i(" "+n(l(e).occupancy??0),1)]),t("li",null,[o[7]||(o[7]=t("b",null,"Vacant Clean:",-1)),i(" "+n(l(e).vacant_clean??0),1)]),t("li",null,[o[8]||(o[8]=t("b",null,"Vacant Dirty:",-1)),i(" "+n(l(e).vacant_dirty??0),1)]),t("li",null,[o[9]||(o[9]=t("b",null,"Out of Order / Storage:",-1)),i(" "+n(l(e).out_of_order_storage_rooms??0),1)])])]),t("div",q,[o[15]||(o[15]=t("h2",{class:"font-semibold mb-2"},"Property",-1)),t("div",G,[t("div",null,[o[11]||(o[11]=t("b",null,"Property Name:",-1)),i(" "+n(l(e).property_name),1)]),t("div",null,[o[12]||(o[12]=t("b",null,"Motel:",-1)),i(" "+n(l(e).motel_name||"—"),1)]),t("div",null,[o[13]||(o[13]=t("b",null,"Location:",-1)),i(" "+n(l(e).location||"—"),1)]),t("div",null,[o[14]||(o[14]=t("b",null,"Created:",-1)),i(" "+n(l(e).created_at||"—"),1)])])])]),t("div",H,[t("div",J,[o[16]||(o[16]=t("h2",{class:"font-semibold mb-2"},"Complimentary Rooms",-1)),t("ul",K,[(d(!0),r(g,null,f(l(e).comp_rooms,s=>(d(),r("li",{key:s.id},[i(" Room "+n(s.room_number)+" ",1),s.notes?(d(),r("span",Q,"— "+n(s.notes),1)):m("",!0)]))),128)),(a=l(e).comp_rooms)!=null&&a.length?m("",!0):(d(),r("li",W,"None"))])]),t("div",Y,[o[17]||(o[17]=t("h2",{class:"font-semibold mb-2"},"Incidents",-1)),t("ul",Z,[(d(!0),r(g,null,f(l(e).incidents,s=>(d(),r("li",{key:s.id},n(s.description),1))),128)),(p=l(e).incidents)!=null&&p.length?m("",!0):(d(),r("li",tt,"None"))])]),t("div",ot,[o[18]||(o[18]=t("h2",{class:"font-semibold mb-2"},"Vacant / Dirty Rooms",-1)),t("ul",st,[(d(!0),r(g,null,f(l(e).vacant_dirty_rooms,s=>(d(),r("li",{key:s.id},[i(" Room "+n(s.room_number)+" — "+n(s.reason||"N/A")+" ("+n(s.days??0)+" days) ",1),s.action?(d(),r("span",et,"/ "+n(s.action),1)):m("",!0)]))),128)),(b=l(e).vacant_dirty_rooms)!=null&&b.length?m("",!0):(d(),r("li",nt,"None"))])]),t("div",lt,[o[19]||(o[19]=t("h2",{class:"font-semibold mb-2"},"Out-of-Order Rooms",-1)),t("ul",rt,[(d(!0),r(g,null,f(l(e).out_of_order_rooms,s=>(d(),r("li",{key:s.id},[i(" Room "+n(s.room_number)+" — "+n(s.reason||"N/A")+" ("+n(s.days??0)+" days) ",1),s.action?(d(),r("span",dt,"/ "+n(s.action),1)):m("",!0)]))),128)),(y=l(e).out_of_order_rooms)!=null&&y.length?m("",!0):(d(),r("li",it,"None"))])])])])):(d(),r("div",F,[O(B)]))}}});export{pt as default};
